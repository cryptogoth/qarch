\documentclass[twoside]{article}

\newcommand{\targfix}{\qw {\xy {<0em,0em> \ar @{ - } +<.39em,0em>
\ar @{ - } -<.39em,0em> \ar @{ - } +<0em,.39em> \ar @{ - }
-<0em,.39em>},<0em,0em>*{\rule{.01em}{.01em}}*+<.8em>\frm{o}
\endxy}}

\input{Qcircuit}

\newcommand{\braket}[2]{\langle #1|#2 \rangle}
\newcommand{\normtwo}{\frac{1}{\sqrt{2}}}
\newcommand{\norm}[1]{\parallel #1 \parallel}

\newcommand\coolleftbrace[2]{%
#1\left\{\vphantom{\begin{matrix} #2 \end{matrix}}\right.}

\begin{document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Compile gates overview

\begin{displaymath}
\begin{matrix}% matrix for left braces
\vphantom{a}\\ 
\coolleftbrace{t}{a \\ a \\ a \\ a \\ a \\ a \\ a \\ a \\ a \\ a \\ a \\ a }
\vphantom{a}\\ 
\vphantom{a}\\ 
\coolleftbrace{L}{a \\ a \\ a \\ a \\ a \\ a \\ a}
\end{matrix}%
\begin{array}{c}
\Qcircuit @C=1em @R=.7em { 
	& \gate{H} & \qw & \ctrl{8}               & \qw                    & \qw                    & \qw                    & \qw                    & \qw                    & \qw                    & \qw                    & \multigate{7}{QFT^{-1}} & \qw \\ 
	& \gate{H} & \qw & \qw                    & \ctrl{7}               & \qw                    & \qw                    & \qw                    & \qw                    & \qw                    & \qw                    & \ghost{QFT^{-1}}        & \qw \\
	& \gate{H} & \qw & \qw                    & \qw                    & \ctrl{6}               & \qw                    & \qw                    & \qw                    & \qw                    & \qw                    & \ghost{QFT^{-1}}        & \qw \\
	& \gate{H} & \qw & \qw                    & \qw                    & \qw                    & \ctrl{5}               & \qw                    & \qw                    & \qw                    & \qw                    & \ghost{QFT^{-1}}        & \qw \\
	& \gate{H} & \qw & \qw                    & \qw                    & \qw                    & \qw                    & \ctrl{4}               & \qw                    & \qw                    & \qw                    & \ghost{QFT^{-1}}        & \qw \\
	& \gate{H} & \qw & \qw                    & \qw                    & \qw                    & \qw                    & \qw                    & \ctrl{3}               & \qw                    & \qw                    & \ghost{QFT^{-1}}        & \qw \\
	& \gate{H} & \qw & \qw                    & \qw                    & \qw                    & \qw                    & \qw                    & \qw                    & \ctrl{2}               & \qw                    & \ghost{QFT^{-1}}        & \qw \\
	& \gate{H} & \qw & \qw                    & \qw                    & \qw                    & \qw                    & \qw                    & \qw                    & \qw                    & \ctrl{1}               & \ghost{QFT^{-1}}        & \qw \\
	& \qw      & \qw & \multigate{4}{U^{2^0}} & \multigate{4}{U^{2^1}} & \multigate{4}{U^{2^2}} & \multigate{4}{U^{2^3}} & \multigate{4}{U^{2^4}} & \multigate{4}{U^{2^5}} & \multigate{4}{U^{2^6}} & \multigate{4}{U^{2^7}} & \qw                     & \qw \\
	& \qw      & \qw & \ghost{U^{2^0}}        & \ghost{U^{2^1}}        & \ghost{U^{2^2}}        & \ghost{U^{2^3}}        & \ghost{U^{2^4}}        & \ghost{U^{2^5}}        & \ghost{U^{2^6}}        & \ghost{U^{2^7}}        & \qw                     & \qw \\
	& \qw      & \qw & \ghost{U^{2^0}}        & \ghost{U^{2^1}}        & \ghost{U^{2^2}}        & \ghost{U^{2^3}}        & \ghost{U^{2^4}}        & \ghost{U^{2^5}}        & \ghost{U^{2^6}}        & \ghost{U^{2^7}}        & \qw                     & \qw \\
	& \qw      & \qw & \ghost{U^{2^0}}        & \ghost{U^{2^1}}        & \ghost{U^{2^2}}        & \ghost{U^{2^3}}        & \ghost{U^{2^4}}        & \ghost{U^{2^5}}        & \ghost{U^{2^6}}        & \ghost{U^{2^7}}        & \qw                     & \qw \\
	& \qw      & \qw & \ghost{U^{2^0}}        & \ghost{U^{2^1}}        & \ghost{U^{2^2}}        & \ghost{U^{2^3}}        & \ghost{U^{2^4}}        & \ghost{U^{2^5}}        & \ghost{U^{2^6}}        & \ghost{U^{2^7}}        & \qw                     & \qw
}\\
\xymatrix {
  & & & & O(t) \ar[llll] \ar[rrrr] & & & & \\
 }
\end{array}
\end{displaymath}


\end{document}